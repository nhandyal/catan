/*! Settlers_of_Catan 2014-04-05 */
!function(a){var b={};$(document).ready(function(){b.head=document.getElementsByTagName("head")[0],b.body=document.getElementsByTagName("body")[0],b.init()}),b.init=function(){$(a).resize(function(){b.cc.init()}),b.cc.init()},b.ZuneView={zuneCards:[],init:function(a,b){function d(a){return String.fromCharCode(a.charCodeAt(0)+1)}function e(a,b,c){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),j=document.createElement("img"),k=document.createElement("img"),l=a*i.width;d.className="flip-container",d.style.width=l,d.style.height=l,d.style.top=c,d.style.left=b,e.className="flipper",g.className="front",h.className="back",j.className="imgFront zuneImg",j.width=l-5,j.height=l-5,j.src=f.getRandomImg(),k.className="imgBack zuneImg",k.width=l-5,k.height=l-5,k.src=f.getRandomImg(),g.appendChild(j),h.appendChild(k),e.appendChild(g),e.appendChild(h),d.appendChild(e);var m=new f.ZuneCard(d,j,k);return f.zuneCards.push(m),d}var f=this,g=document.getElementById(b),h={width:g.clientWidth,height:g.clientHeight},i={width:h.height/a.height,height:h.height/a.height},j="A",k=0,l=0,m=null;a.width=Math.floor(h.width/i.width);var n=0,o=new Array(a.width);for(c=0;c<a.width;c++)o[c]=new Array(a.height);var p=!0;for(document.getElementById("wrapper").style.width=a.width*i.width+"px",r=0;r<a.height;r++)for(c=0;c<a.width;c++)if(void 0===o[c][r]){var q=Math.floor(4*Math.random())+2,s=c,t=r,u=0;for(p&&(q=2);q>u&&s<a.width&&void 0===o[s][r]&&t<a.height;)u++,s++,t++;for(s=c;c+u>s;s++)for(t=r;r+u>t;t++)o[s][t]=j;if(k=c*i.width+n,l=r*i.height,m=new e(u,k,l),p){var v=f.zuneCards[0];v.imgFront.src="../assets/images/logo.png",v.imgBack.src="../assets/images/logo.png",f.zuneCards=[],p=!1}g.appendChild(m),j=d(j)}setInterval(function(){f.updateZuneImgs()},5e3)},getRandomImg:function(){var a=Math.floor(47*Math.random());return"../assets/images/"+a+".jpg"},updateZuneImgs:function(){var a=Math.floor(Math.random()*this.zuneCards.length),b=this.zuneCards[a],c=this;b.frontVisible?b.imgBack.src=c.getRandomImg():b.imgFront.src=c.getRandomImg(),b.frontVisible=!b.frontVisible,b.flipContainer.classList.toggle("flip")},ZuneCard:function(a,b,c){return{flipContainer:a,imgFront:b,imgBack:c,frontVisible:!0}}},b.cc={init:function(){$("#catan_canvas").remove();var a=document.createElement("canvas"),c=a.getContext("2d"),d=b.utils.getWindowSize();this.canvas=a,this.canvas_context=c,a.id="catan_canvas",a.width=.9*d.width,a.height=.9*d.height,a.style.margin=Math.floor(.03*d.height)+"px "+(Math.floor(.05*d.width)+"px"),b.body.appendChild(a),c.strokeStyle="red",c.lineWidth=2,c.fillStyle="#9ea7b8",c.fillRect(0,0,d.width,d.height)},draw:function(){var a=(this.canvas,this.canvas_context),b=200,c=.5*b,d=.866*b,e=function(){a.moveTo(0,c+b),a.lineTo(0,c),a.stroke(),a.moveTo(0,c),a.lineTo(d,0),a.stroke(),a.moveTo(d,0),a.lineTo(2*d,c),a.stroke(),a.moveTo(2*d,c),a.lineTo(2*d,c+b),a.stroke(),a.moveTo(2*d,c+b),a.lineTo(d,2*b),a.stroke(),a.moveTo(d,2*b),a.lineTo(0,c+b),a.stroke()};e()}},b.utils={getWindowSize:function(){return{width:a.innerWidth,height:a.innerHeight}}},"object"==typeof a&&(a.Catan=a.SC=b)}(window);